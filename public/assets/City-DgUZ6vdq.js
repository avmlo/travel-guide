import{a as I,W as O,r as i,j as t,H as q,D as L,b as P,Y as A,s as m}from"./index-Bbf6GYnP.js";function R(d){return d.split("-").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ")}function T(){const[,d]=I(),[,l]=O("/city/:city"),c=l?.city||"",[g,N]=i.useState([]),[y,f]=i.useState(!0),[v,C]=i.useState(null),[D,x]=i.useState(!1),[j,k]=i.useState([]),[E,V]=i.useState([]),[U,w]=i.useState(null),[n,b]=i.useState("");i.useEffect(()=>{async function e(){const{data:{session:a}}=await m.auth.getSession();if(w(a?.user||null),a?.user){const{data:u}=await m.from("saved_places").select("destination_slug").eq("user_id",a.user.id);u&&k(u.map(s=>s.destination_slug));const{data:o}=await m.from("visited_places").select("destination_slug").eq("user_id",a.user.id);o&&V(o.map(s=>s.destination_slug))}}e()},[]),i.useEffect(()=>{async function e(){const{data:a,error:u}=await m.from("destinations").select("*").eq("city",c).order("name");if(!u&&a){const o=a.map(s=>({name:s.name,slug:s.slug,city:s.city,category:s.category,content:s.content||s.description||"",mainImage:s.image||"",michelinStars:s.michelin_stars||0,crown:s.crown||!1,brand:"",cardTags:"",lat:0,long:0,myRating:0,reviewed:!1,subline:s.description||""}));N(o)}f(!1)}c&&e()},[c]);const S=e=>{C(e),x(!0)},p={"Eat & Drink":{emoji:"ðŸ½ï¸",label:"Eat & Drink"},Stay:{emoji:"ðŸ¨",label:"Stay"},Space:{emoji:"ðŸ›ï¸",label:"Space"},Other:{emoji:"âœ¨",label:"Other"}},h=Array.from(new Set(g.map(e=>e.category))).sort(),_=[{emoji:"ðŸŒ",label:"All",value:""},...h.map(e=>({emoji:p[e]?.emoji||"âœ¨",label:p[e]?.label||e,value:e}))],r=n?g.filter(e=>e.category===n):g;return y?t.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:133",className:"min-h-screen bg-white dark:bg-gray-950 flex items-center justify-center transition-colors duration-300",children:t.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:134",className:"text-xs font-bold uppercase text-black/60 dark:text-white/60",children:"Loading..."},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:134,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:133,columnNumber:7},this):t.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:140",className:"min-h-screen bg-white dark:bg-gray-950 transition-colors duration-300",children:[t.jsxDEV(q,{"data-loc":"client/src/pages/City.tsx:141"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:141,columnNumber:7},this),t.jsxDEV("main",{"data-loc":"client/src/pages/City.tsx:144",className:"px-6 md:px-10 py-12",children:t.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:145",className:"max-w-[1920px] mx-auto",children:[t.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:147",className:"mb-6",children:t.jsxDEV("button",{"data-loc":"client/src/pages/City.tsx:148",onClick:()=>d("/cities"),className:"text-xs font-bold uppercase text-black/60 dark:text-white/60 hover:opacity-60 transition-opacity",children:"â† CITIES"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:148,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:147,columnNumber:11},this),t.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:157",className:"mb-12",children:[t.jsxDEV("h1",{"data-loc":"client/src/pages/City.tsx:158",className:"text-[clamp(24px,5vw,48px)] font-bold uppercase leading-none tracking-tight mb-4 text-black dark:text-white",children:R(c)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:158,columnNumber:13},this),t.jsxDEV("p",{"data-loc":"client/src/pages/City.tsx:161",className:"text-xs font-bold uppercase text-black/60 dark:text-white/60",children:[r.length," ",r.length===1?"destination":"destinations"]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:161,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:157,columnNumber:11},this),h.length>0&&t.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:168",className:"mb-8",children:[t.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:169",className:"mb-3",children:t.jsxDEV("h2",{"data-loc":"client/src/pages/City.tsx:170",className:"text-xs font-bold uppercase text-black dark:text-white",children:"Categories"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:170,columnNumber:17},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:169,columnNumber:15},this),t.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:172",className:"flex flex-wrap gap-2",children:_.map(e=>t.jsxDEV("button",{"data-loc":"client/src/pages/City.tsx:174",onClick:()=>b(e.value),className:`px-4 py-2 rounded-lg text-xs font-bold uppercase transition-opacity ${n===e.value?"bg-black text-white dark:bg-white dark:text-black":"border border-gray-200 dark:border-gray-800 text-black dark:text-white hover:opacity-60"}`,children:[t.jsxDEV("span",{"data-loc":"client/src/pages/City.tsx:183",className:"mr-1.5",children:e.emoji},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:183,columnNumber:21},this),e.label]},e.value,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:174,columnNumber:19},this))},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:172,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:168,columnNumber:13},this),r.length===0?t.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:193",className:"text-center py-20",children:[t.jsxDEV("p",{"data-loc":"client/src/pages/City.tsx:194",className:"text-xs font-bold uppercase text-black/40 dark:text-white/40",children:"No destinations found."},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:194,columnNumber:15},this),n&&t.jsxDEV("button",{"data-loc":"client/src/pages/City.tsx:198",onClick:()=>b(""),className:"mt-4 text-xs font-bold uppercase text-black dark:text-white hover:opacity-60 transition-opacity",children:"Clear filter"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:198,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:193,columnNumber:13},this):t.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:207",className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7 gap-4 md:gap-6",children:r.map((e,a)=>t.jsxDEV(L,{"data-loc":"client/src/pages/City.tsx:209",destination:e,colorIndex:a,onClick:()=>S(e),isSaved:j.includes(e.slug),isVisited:E.includes(e.slug)},e.slug,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:209,columnNumber:17},this))},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:207,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:145,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:144,columnNumber:7},this),t.jsxDEV(P,{"data-loc":"client/src/pages/City.tsx:223"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:223,columnNumber:7},this),t.jsxDEV(A,{"data-loc":"client/src/pages/City.tsx:226",destination:v,isOpen:D,onClose:()=>x(!1)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:226,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:140,columnNumber:5},this)}export{T as default};
