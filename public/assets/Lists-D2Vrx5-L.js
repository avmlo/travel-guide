import{a as w,r as l,j as e,H as L,b as j,T as D,Z as k,d as C,s as u,t as r}from"./index-DMrgTe9s.js";import{P as _,L as S}from"./plus-CR8lq-28.js";import{P}from"./pen-Cfr88xOc.js";import{T as F}from"./trash-2-S9LPGSck.js";function H(){const[,t]=w(),[b,x]=l.useState(null),[c,N]=l.useState([]),[m,h]=l.useState(!0),[d,n]=l.useState(!1),[g,o]=l.useState(null);l.useEffect(()=>{async function s(){const{data:{session:i}}=await u.auth.getSession();if(!i){t("/auth/login");return}x(i.user),await p(i.user.id)}s()},[t]);async function p(s){h(!0);const{data:i,error:f}=await u.from("lists").select("*").eq("user_id",s).order("updated_at",{ascending:!1});if(f)console.error("Error fetching lists:",f),r.error("Failed to load lists");else{const E=await Promise.all((i||[]).map(async v=>{const{count:V}=await u.from("list_items").select("*",{count:"exact",head:!0}).eq("list_id",v.id),{count:y}=await u.from("list_likes").select("*",{count:"exact",head:!0}).eq("list_id",v.id);return{...v,item_count:V||0,like_count:y||0}}));N(E)}h(!1)}async function a(s){if(!confirm("Are you sure you want to delete this list?"))return;const{error:i}=await u.from("lists").delete().eq("id",s);i?r.error("Failed to delete list"):(r.success("List deleted"),N(c.filter(f=>f.id!==s)))}return m?e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:102",className:"min-h-screen bg-white",children:[e.jsxDEV(L,{"data-loc":"client/src/pages/Lists.tsx:103"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:103,columnNumber:9},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:104",className:"flex items-center justify-center h-[calc(100vh-200px)]",children:e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:105",className:"text-center",children:e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:106",className:"animate-pulse text-gray-400",children:"Loading lists..."},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:106,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:105,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:104,columnNumber:9},this),e.jsxDEV(j,{"data-loc":"client/src/pages/Lists.tsx:109"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:109,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:102,columnNumber:7},this):e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:115",className:"min-h-screen bg-white",children:[e.jsxDEV(L,{"data-loc":"client/src/pages/Lists.tsx:116"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:116,columnNumber:7},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:118",className:"max-w-6xl mx-auto px-6 md:px-10 py-12",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:120",className:"flex items-center justify-between mb-12",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:121",children:[e.jsxDEV("h1",{"data-loc":"client/src/pages/Lists.tsx:122",className:"text-4xl font-normal mb-2",children:"My Lists"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:122,columnNumber:13},this),e.jsxDEV("p",{"data-loc":"client/src/pages/Lists.tsx:123",className:"text-gray-600",children:"Organize your favorite destinations into collections"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:123,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:121,columnNumber:11},this),e.jsxDEV("button",{"data-loc":"client/src/pages/Lists.tsx:125",onClick:()=>n(!0),className:"flex items-center gap-2 px-6 py-3 bg-black text-white hover:bg-gray-800 transition-colors",children:[e.jsxDEV(_,{"data-loc":"client/src/pages/Lists.tsx:129",className:"h-5 w-5"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:129,columnNumber:13},this),e.jsxDEV("span",{"data-loc":"client/src/pages/Lists.tsx:130",children:"New List"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:130,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:125,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:120,columnNumber:9},this),c.length===0?e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:136",className:"text-center py-24",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:137",className:"mb-6",children:e.jsxDEV(D,{"data-loc":"client/src/pages/Lists.tsx:138",className:"h-16 w-16 text-gray-300 mx-auto"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:138,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:137,columnNumber:13},this),e.jsxDEV("h3",{"data-loc":"client/src/pages/Lists.tsx:140",className:"text-xl font-normal mb-2",children:"No lists yet"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:140,columnNumber:13},this),e.jsxDEV("p",{"data-loc":"client/src/pages/Lists.tsx:141",className:"text-gray-600 mb-6",children:"Create your first list to start organizing destinations"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:141,columnNumber:13},this),e.jsxDEV("button",{"data-loc":"client/src/pages/Lists.tsx:142",onClick:()=>n(!0),className:"px-6 py-3 bg-black text-white hover:bg-gray-800 transition-colors",children:"Create List"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:142,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:136,columnNumber:11},this):e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:150",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(s=>e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:152",className:"border border-gray-200 hover:border-black transition-colors cursor-pointer group",onClick:()=>t(`/list/${s.id}`),children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:158",className:"aspect-square bg-gray-100 relative overflow-hidden",children:[s.cover_image?e.jsxDEV("img",{"data-loc":"client/src/pages/Lists.tsx:160",src:s.cover_image,alt:s.name,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:160,columnNumber:21},this):e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:166",className:"w-full h-full flex items-center justify-center text-gray-300",children:e.jsxDEV(D,{"data-loc":"client/src/pages/Lists.tsx:167",className:"h-12 w-12"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:167,columnNumber:23},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:166,columnNumber:21},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:172",className:"absolute top-2 right-2 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsxDEV("button",{"data-loc":"client/src/pages/Lists.tsx:173",onClick:i=>{i.stopPropagation(),o(s),n(!0)},className:"p-2 bg-white hover:bg-gray-100 transition-colors",children:e.jsxDEV(P,{"data-loc":"client/src/pages/Lists.tsx:181",className:"h-4 w-4"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:181,columnNumber:23},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:173,columnNumber:21},this),e.jsxDEV("button",{"data-loc":"client/src/pages/Lists.tsx:183",onClick:i=>{i.stopPropagation(),a(s.id)},className:"p-2 bg-white hover:bg-red-50 text-red-600 transition-colors",children:e.jsxDEV(F,{"data-loc":"client/src/pages/Lists.tsx:190",className:"h-4 w-4"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:190,columnNumber:23},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:183,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:172,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:158,columnNumber:17},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:196",className:"p-4",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:197",className:"flex items-start justify-between mb-2",children:[e.jsxDEV("h3",{"data-loc":"client/src/pages/Lists.tsx:198",className:"font-normal text-lg",children:s.name},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:198,columnNumber:21},this),s.is_public?e.jsxDEV(k,{"data-loc":"client/src/pages/Lists.tsx:200",className:"h-4 w-4 text-gray-400 flex-shrink-0"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:200,columnNumber:23},this):e.jsxDEV(S,{"data-loc":"client/src/pages/Lists.tsx:202",className:"h-4 w-4 text-gray-400 flex-shrink-0"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:202,columnNumber:23},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:197,columnNumber:19},this),s.description&&e.jsxDEV("p",{"data-loc":"client/src/pages/Lists.tsx:207",className:"text-sm text-gray-600 mb-3 line-clamp-2",children:s.description},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:207,columnNumber:21},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:212",className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxDEV("span",{"data-loc":"client/src/pages/Lists.tsx:213",children:[s.item_count," ",s.item_count===1?"place":"places"]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:213,columnNumber:21},this),s.is_public&&e.jsxDEV("span",{"data-loc":"client/src/pages/Lists.tsx:215",className:"flex items-center gap-1",children:[e.jsxDEV(C,{"data-loc":"client/src/pages/Lists.tsx:216",className:"h-3 w-3"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:216,columnNumber:25},this),s.like_count]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:215,columnNumber:23},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:212,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:196,columnNumber:17},this)]},s.id,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:152,columnNumber:15},this))},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:150,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:118,columnNumber:7},this),e.jsxDEV(j,{"data-loc":"client/src/pages/Lists.tsx:228"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:228,columnNumber:7},this),d&&e.jsxDEV(q,{"data-loc":"client/src/pages/Lists.tsx:232",list:g,onClose:()=>{n(!1),o(null)},onSave:()=>{n(!1),o(null),b&&p(b.id)}},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:232,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:115,columnNumber:5},this)}function q({list:t,onClose:b,onSave:x}){const[c,N]=l.useState(t?.name||""),[m,h]=l.useState(t?.description||""),[d,n]=l.useState(t?.is_public??!0),[g,o]=l.useState(!1);async function p(){if(!c.trim()){r.error("Please enter a list name");return}o(!0);const{data:{session:a}}=await u.auth.getSession();if(!a){r.error("Please sign in");return}if(t){const{error:s}=await u.from("lists").update({name:c.trim(),description:m.trim()||null,is_public:d,updated_at:new Date().toISOString()}).eq("id",t.id);s?(r.error("Failed to update list"),console.error(s)):(r.success("List updated"),x())}else{const{error:s}=await u.from("lists").insert({user_id:a.user.id,name:c.trim(),description:m.trim()||null,is_public:d});s?(r.error("Failed to create list"),console.error(s)):(r.success("List created"),x())}o(!1)}return e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:321",className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:322",className:"bg-white max-w-md w-full p-8",children:[e.jsxDEV("h2",{"data-loc":"client/src/pages/Lists.tsx:323",className:"text-2xl font-normal mb-6",children:t?"Edit List":"Create New List"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:323,columnNumber:9},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:327",className:"space-y-6",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:328",children:[e.jsxDEV("label",{"data-loc":"client/src/pages/Lists.tsx:329",className:"block text-xs uppercase tracking-wider text-gray-600 mb-2",children:"List Name"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:329,columnNumber:13},this),e.jsxDEV("input",{"data-loc":"client/src/pages/Lists.tsx:332",type:"text",value:c,onChange:a=>N(a.target.value),placeholder:"e.g., Tokyo Favorites",className:"w-full px-4 py-3 border border-gray-300 focus:border-black focus:outline-none",autoFocus:!0},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:332,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:328,columnNumber:11},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:342",children:[e.jsxDEV("label",{"data-loc":"client/src/pages/Lists.tsx:343",className:"block text-xs uppercase tracking-wider text-gray-600 mb-2",children:"Description (Optional)"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:343,columnNumber:13},this),e.jsxDEV("textarea",{"data-loc":"client/src/pages/Lists.tsx:346",value:m,onChange:a=>h(a.target.value),placeholder:"Describe your list...",rows:3,className:"w-full px-4 py-3 border border-gray-300 focus:border-black focus:outline-none resize-none"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:346,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:342,columnNumber:11},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:355",children:e.jsxDEV("label",{"data-loc":"client/src/pages/Lists.tsx:356",className:"flex items-center gap-3 cursor-pointer",children:[e.jsxDEV("input",{"data-loc":"client/src/pages/Lists.tsx:357",type:"checkbox",checked:d,onChange:a=>n(a.target.checked),className:"w-5 h-5"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:357,columnNumber:15},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:363",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:364",className:"font-normal",children:"Make this list public"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:364,columnNumber:17},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:365",className:"text-xs text-gray-600",children:"Anyone can view this list"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:365,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:363,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:356,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:355,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:327,columnNumber:9},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Lists.tsx:371",className:"flex gap-3 mt-8",children:[e.jsxDEV("button",{"data-loc":"client/src/pages/Lists.tsx:372",onClick:b,className:"flex-1 px-6 py-3 border border-gray-300 hover:border-black transition-colors",disabled:g,children:"Cancel"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:372,columnNumber:11},this),e.jsxDEV("button",{"data-loc":"client/src/pages/Lists.tsx:379",onClick:p,className:"flex-1 px-6 py-3 bg-black text-white hover:bg-gray-800 transition-colors disabled:opacity-50",disabled:g,children:g?"Saving...":t?"Update":"Create"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:379,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:371,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:322,columnNumber:7},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Lists.tsx",lineNumber:321,columnNumber:5},this)}export{H as default};
