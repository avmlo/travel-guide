import{a as U,r as c,j as e,H as q,d as F,C as L,b as P,Y as I,s as m}from"./index-DYbaPiT3.js";function y(u){return u.split("-").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" ")}function T(){const[,u]=U(),[x,D]=c.useState(!0),[N,j]=c.useState(null),[o,E]=c.useState([]),[r,V]=c.useState([]),[h,p]=c.useState(null),[k,v]=c.useState(!1),[w,_]=c.useState([]),[b,f]=c.useState("saved");c.useEffect(()=>{async function t(){const{data:i}=await m.from("destinations").select("*");if(i){const n=i.map(s=>({name:s.name,slug:s.slug,city:s.city,category:s.category,content:s.content||s.description||"",mainImage:s.image||"",michelinStars:s.michelin_stars||0,crown:s.crown||!1,brand:"",cardTags:"",lat:0,long:0,myRating:0,reviewed:!1,subline:s.description||""}));_(n)}}t()},[]);const A=t=>{const i=w.find(n=>n.slug===t);i&&(p(i),v(!0))};if(c.useEffect(()=>{async function t(){const{data:{session:i}}=await m.auth.getSession();if(!i){u("/auth/login");return}j(i.user);const{data:n}=await m.from("saved_destinations").select("destination_slug").eq("user_id",i.user.id);if(n){const d=n.map(l=>l.destination_slug);if(d.length>0){const{data:l}=await m.from("destinations").select("slug, name, city, category, image").in("slug",d);l&&E(l.map(a=>({destination_slug:a.slug,destination:{name:a.name,city:a.city,category:a.category,image:a.image}})))}}const{data:s}=await m.from("visited_destinations").select("destination_slug, visited_date, rating, notes").eq("user_id",i.user.id).order("visited_date",{ascending:!1});if(s){const d=s.map(l=>l.destination_slug);if(d.length>0){const{data:l}=await m.from("destinations").select("slug, name, city, category, image").in("slug",d);l&&V(s.map(a=>{const g=l.find(C=>C.slug===a.destination_slug);return{destination_slug:a.destination_slug,visited_date:a.visited_date,rating:a.rating,notes:a.notes,destination:g?{name:g.name,city:g.city,category:g.category,image:g.image}:null}}).filter(a=>a.destination!==null))}}D(!1)}t()},[u]),x)return e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:181",className:"min-h-screen flex items-center justify-center bg-white",children:e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:182",className:"text-lg text-gray-400",children:"Loading..."},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:182,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:181,columnNumber:7},this);const S=new Set([...o.map(t=>t.destination.city),...r.filter(t=>t.destination).map(t=>t.destination.city)]);return new Set([...o.map(t=>t.destination.city),...r.filter(t=>t.destination).map(t=>t.destination.city)].map(t=>({tokyo:"Japan",kyoto:"Japan",osaka:"Japan",paris:"France",lyon:"France",london:"United Kingdom","new-york":"United States","los-angeles":"United States",barcelona:"Spain",madrid:"Spain",rome:"Italy",milan:"Italy"})[t]||"Other")),e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:209",className:"min-h-screen bg-white dark:bg-gray-950",children:[e.jsxDEV(q,{"data-loc":"client/src/pages/Account.tsx:210"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:210,columnNumber:7},this),e.jsxDEV("main",{"data-loc":"client/src/pages/Account.tsx:213",className:"px-6 md:px-10 py-12 dark:text-white",children:e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:214",className:"max-w-[1920px] mx-auto",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:217",className:"mb-12",children:[e.jsxDEV("h1",{"data-loc":"client/src/pages/Account.tsx:218",className:"text-[clamp(24px,5vw,48px)] font-bold uppercase leading-none tracking-tight mb-2",children:N?.user_metadata?.name||N?.email?.split("@")[0]||"Traveler"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:218,columnNumber:13},this),e.jsxDEV("p",{"data-loc":"client/src/pages/Account.tsx:219",className:"text-xs font-bold uppercase text-black/60 dark:text-white/60",children:N?.email},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:219,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:217,columnNumber:11},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:223",className:"grid grid-cols-3 gap-6 mb-12 pb-12 border-b border-gray-200 dark:border-gray-800",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:224",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:225",className:"text-3xl font-bold mb-1",children:r.length},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:225,columnNumber:15},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:226",className:"text-xs font-bold uppercase text-black/60 dark:text-white/60",children:"Places Visited"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:226,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:224,columnNumber:13},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:228",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:229",className:"text-3xl font-bold mb-1",children:o.length},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:229,columnNumber:15},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:230",className:"text-xs font-bold uppercase text-black/60 dark:text-white/60",children:"Saved"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:230,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:228,columnNumber:13},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:232",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:233",className:"text-3xl font-bold mb-1",children:S.size},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:233,columnNumber:15},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:234",className:"text-xs font-bold uppercase text-black/60 dark:text-white/60",children:"Cities"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:234,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:232,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:223,columnNumber:11},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:239",className:"mb-8 border-b border-gray-200 dark:border-gray-800",children:e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:240",className:"flex gap-8",children:[e.jsxDEV("button",{"data-loc":"client/src/pages/Account.tsx:241",onClick:()=>f("saved"),className:`pb-4 text-xs font-bold uppercase transition-opacity ${b==="saved"?"border-b-2 border-black dark:border-white text-black dark:text-white":"text-black/30 dark:text-white/30 hover:opacity-60"}`,children:["Saved (",o.length,")"]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:241,columnNumber:15},this),e.jsxDEV("button",{"data-loc":"client/src/pages/Account.tsx:251",onClick:()=>f("visited"),className:`pb-4 text-xs font-bold uppercase transition-opacity ${b==="visited"?"border-b-2 border-black dark:border-white text-black dark:text-white":"text-black/30 dark:text-white/30 hover:opacity-60"}`,children:["Visited (",r.length,")"]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:251,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:240,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:239,columnNumber:11},this),b==="saved"&&e.jsxDEV(e.Fragment,{children:o.length===0?e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:268",className:"text-center py-16",children:[e.jsxDEV(F,{"data-loc":"client/src/pages/Account.tsx:269",className:"h-12 w-12 text-gray-300 mx-auto mb-4"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:269,columnNumber:19},this),e.jsxDEV("p",{"data-loc":"client/src/pages/Account.tsx:270",className:"text-gray-400",children:"No saved places yet"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:270,columnNumber:19},this),e.jsxDEV("button",{"data-loc":"client/src/pages/Account.tsx:271",onClick:()=>u("/"),className:"mt-4 text-xs font-bold uppercase hover:opacity-60 transition-opacity",children:"Explore Destinations"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:271,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:268,columnNumber:17},this):e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:279",className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:o.map(t=>e.jsxDEV("button",{"data-loc":"client/src/pages/Account.tsx:281",onClick:()=>A(t.destination_slug),className:"group text-left",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:286",className:"aspect-square bg-gray-100 mb-3 overflow-hidden",children:t.destination.image&&e.jsxDEV("img",{"data-loc":"client/src/pages/Account.tsx:288",src:t.destination.image,alt:t.destination.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:288,columnNumber:27},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:286,columnNumber:23},this),e.jsxDEV("h3",{"data-loc":"client/src/pages/Account.tsx:295",className:"font-medium text-sm mb-1 line-clamp-2",children:t.destination.name},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:295,columnNumber:23},this),e.jsxDEV("p",{"data-loc":"client/src/pages/Account.tsx:296",className:"text-xs text-gray-600",children:y(t.destination.city)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:296,columnNumber:23},this)]},t.destination_slug,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:281,columnNumber:21},this))},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:279,columnNumber:17},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:266,columnNumber:13},this),b==="visited"&&e.jsxDEV(e.Fragment,{children:r.length===0?e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:307",className:"text-center py-16",children:[e.jsxDEV(L,{"data-loc":"client/src/pages/Account.tsx:308",className:"h-12 w-12 text-gray-300 mx-auto mb-4"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:308,columnNumber:19},this),e.jsxDEV("p",{"data-loc":"client/src/pages/Account.tsx:309",className:"text-gray-400",children:"No visited places yet"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:309,columnNumber:19},this),e.jsxDEV("button",{"data-loc":"client/src/pages/Account.tsx:310",onClick:()=>u("/"),className:"mt-4 text-xs font-bold uppercase hover:opacity-60 transition-opacity",children:"Explore Destinations"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:310,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:307,columnNumber:17},this):e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:318",className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:r.map(t=>t.destination&&e.jsxDEV("button",{"data-loc":"client/src/pages/Account.tsx:321",onClick:()=>A(t.destination_slug),className:"group text-left",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:326",className:"aspect-square bg-gray-100 mb-3 overflow-hidden relative",children:[t.destination.image&&e.jsxDEV("img",{"data-loc":"client/src/pages/Account.tsx:328",src:t.destination.image,alt:t.destination.name,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:328,columnNumber:29},this),t.visited_date&&e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:335",className:"absolute bottom-2 left-2 bg-white px-2 py-1 text-xs",children:new Date(t.visited_date).toLocaleDateString("en-US",{month:"short",year:"numeric"})},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:335,columnNumber:29},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:326,columnNumber:25},this),e.jsxDEV("h3",{"data-loc":"client/src/pages/Account.tsx:340",className:"font-medium text-sm mb-1 line-clamp-2",children:t.destination.name},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:340,columnNumber:25},this),e.jsxDEV("p",{"data-loc":"client/src/pages/Account.tsx:341",className:"text-xs text-gray-600",children:y(t.destination.city)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:341,columnNumber:25},this),t.rating>0&&e.jsxDEV("div",{"data-loc":"client/src/pages/Account.tsx:343",className:"flex gap-0.5 mt-1",children:[...Array(5)].map((i,n)=>e.jsxDEV("span",{"data-loc":"client/src/pages/Account.tsx:345",className:`text-xs ${n<t.rating?"text-black":"text-gray-300"}`,children:"★"},n,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:345,columnNumber:31},this))},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:343,columnNumber:27},this)]},t.destination_slug,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:321,columnNumber:23},this))},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:318,columnNumber:17},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:305,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:214,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:213,columnNumber:7},this),e.jsxDEV(P,{"data-loc":"client/src/pages/Account.tsx:359"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:359,columnNumber:7},this),h&&e.jsxDEV(I,{"data-loc":"client/src/pages/Account.tsx:363",destination:h,isOpen:k,onClose:()=>{v(!1),p(null)}},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:363,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Account.tsx",lineNumber:209,columnNumber:5},this)}export{T as default};
