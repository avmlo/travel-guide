import{c as V,r as l,a as g,s as m,j as e,T as h,S as x,d as w,H as f,b as p}from"./index-DMrgTe9s.js";import{U as _}from"./user-CEX8WejV.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=V("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);function S({userId:c,followingOnly:o=!1,limit:a=20}){const[n,r]=l.useState([]),[d,u]=l.useState(!0),[,v]=g();l.useEffect(()=>{F()},[c,o,a]);const F=async()=>{try{let t=m.from("activities").select(`
          *,
          user_profiles (
            username,
            display_name,
            profile_photo
          ),
          destinations (
            name,
            slug
          ),
          lists (
            name
          ),
          reviews (
            rating
          )
        `).order("created_at",{ascending:!1}).limit(a);if(c)t=t.eq("user_id",c);else if(o){const{data:{user:i}}=await m.auth.getUser();if(i){const{data:b}=await m.from("follows").select("following_id").eq("follower_id",i.id);if(b&&b.length>0){const E=b.map(D=>D.following_id);t=t.in("user_id",E)}else{r([]),u(!1);return}}}const{data:s,error:N}=await t;if(N)throw N;r(s||[])}catch(t){console.error("Error fetching activities:",t)}finally{u(!1)}},y=t=>{switch(t){case"saved":return e.jsxDEV(w,{"data-loc":"client/src/components/ActivityFeed.tsx:110",className:"h-5 w-5 text-red-500"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:110,columnNumber:16},this);case"visited":return e.jsxDEV(h,{"data-loc":"client/src/components/ActivityFeed.tsx:112",className:"h-5 w-5 text-green-500"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:112,columnNumber:16},this);case"reviewed":return e.jsxDEV(x,{"data-loc":"client/src/components/ActivityFeed.tsx:114",className:"h-5 w-5 text-yellow-500"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:114,columnNumber:16},this);case"created_list":return e.jsxDEV(k,{"data-loc":"client/src/components/ActivityFeed.tsx:116",className:"h-5 w-5 text-blue-500"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:116,columnNumber:16},this);case"followed":return e.jsxDEV(_,{"data-loc":"client/src/components/ActivityFeed.tsx:118",className:"h-5 w-5 text-purple-500"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:118,columnNumber:16},this);default:return e.jsxDEV(h,{"data-loc":"client/src/components/ActivityFeed.tsx:120",className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:120,columnNumber:16},this)}},A=t=>{const s=t.user_profiles?.display_name||t.user_profiles?.username||"Someone";switch(t.type){case"saved":return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{"data-loc":"client/src/components/ActivityFeed.tsx:131",className:"font-semibold",children:s},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:131,columnNumber:13},this)," saved"," ",t.destinations&&e.jsxDEV("button",{"data-loc":"client/src/components/ActivityFeed.tsx:133",onClick:()=>v(`/destination/${t.destinations?.slug}`),className:"font-semibold hover:underline",children:t.destinations.name},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:133,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:130,columnNumber:11},this);case"visited":return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{"data-loc":"client/src/components/ActivityFeed.tsx:145",className:"font-semibold",children:s},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:145,columnNumber:13},this)," visited"," ",t.destinations&&e.jsxDEV("button",{"data-loc":"client/src/components/ActivityFeed.tsx:147",onClick:()=>v(`/destination/${t.destinations?.slug}`),className:"font-semibold hover:underline",children:t.destinations.name},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:147,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:144,columnNumber:11},this);case"reviewed":return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{"data-loc":"client/src/components/ActivityFeed.tsx:159",className:"font-semibold",children:s},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:159,columnNumber:13},this)," reviewed"," ",t.destinations&&e.jsxDEV("button",{"data-loc":"client/src/components/ActivityFeed.tsx:161",onClick:()=>v(`/destination/${t.destinations?.slug}`),className:"font-semibold hover:underline",children:t.destinations.name},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:161,columnNumber:15},this),t.reviews&&e.jsxDEV("span",{"data-loc":"client/src/components/ActivityFeed.tsx:169",className:"ml-2 inline-flex items-center gap-1",children:[e.jsxDEV(x,{"data-loc":"client/src/components/ActivityFeed.tsx:170",className:"h-3 w-3 fill-yellow-400 text-yellow-400"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:170,columnNumber:17},this),e.jsxDEV("span",{"data-loc":"client/src/components/ActivityFeed.tsx:171",className:"text-sm",children:t.reviews.rating},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:171,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:169,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:158,columnNumber:11},this);case"created_list":return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{"data-loc":"client/src/components/ActivityFeed.tsx:179",className:"font-semibold",children:s},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:179,columnNumber:13},this)," created a list"," ",t.lists&&e.jsxDEV("span",{"data-loc":"client/src/components/ActivityFeed.tsx:181",className:"font-semibold",children:['"',t.lists.name,'"']},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:181,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:178,columnNumber:11},this);case"followed":return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{"data-loc":"client/src/components/ActivityFeed.tsx:188",className:"font-semibold",children:s},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:188,columnNumber:13},this)," started following someone"]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:187,columnNumber:11},this);default:return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{"data-loc":"client/src/components/ActivityFeed.tsx:194",className:"font-semibold",children:s},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:194,columnNumber:13},this)," ",t.content||"did something"]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:193,columnNumber:11},this)}},j=t=>{const s=new Date(t),i=Math.floor((new Date().getTime()-s.getTime())/1e3);return i<60?"just now":i<3600?`${Math.floor(i/60)}m ago`:i<86400?`${Math.floor(i/3600)}h ago`:i<604800?`${Math.floor(i/86400)}d ago`:s.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return d?e.jsxDEV("div",{"data-loc":"client/src/components/ActivityFeed.tsx:215",className:"space-y-4",children:[...Array(3)].map((t,s)=>e.jsxDEV("div",{"data-loc":"client/src/components/ActivityFeed.tsx:217",className:"animate-pulse flex gap-4 p-4 bg-white rounded-lg border border-gray-200",children:[e.jsxDEV("div",{"data-loc":"client/src/components/ActivityFeed.tsx:218",className:"w-10 h-10 bg-gray-200 rounded-full"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:218,columnNumber:13},this),e.jsxDEV("div",{"data-loc":"client/src/components/ActivityFeed.tsx:219",className:"flex-1 space-y-2",children:[e.jsxDEV("div",{"data-loc":"client/src/components/ActivityFeed.tsx:220",className:"h-4 bg-gray-200 rounded w-3/4"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:220,columnNumber:15},this),e.jsxDEV("div",{"data-loc":"client/src/components/ActivityFeed.tsx:221",className:"h-3 bg-gray-200 rounded w-1/4"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:221,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:219,columnNumber:13},this)]},s,!0,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:217,columnNumber:11},this))},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:215,columnNumber:7},this):n.length===0?e.jsxDEV("div",{"data-loc":"client/src/components/ActivityFeed.tsx:231",className:"text-center py-12 bg-gray-50 rounded-lg",children:e.jsxDEV("p",{"data-loc":"client/src/components/ActivityFeed.tsx:232",className:"text-gray-500",children:o?"No recent activity from people you follow":"No activity yet"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:232,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:231,columnNumber:7},this):e.jsxDEV("div",{"data-loc":"client/src/components/ActivityFeed.tsx:242",className:"space-y-3",children:n.map(t=>e.jsxDEV("div",{"data-loc":"client/src/components/ActivityFeed.tsx:244",className:"flex gap-4 p-4 bg-white rounded-lg border border-gray-200 hover:border-gray-300 transition-colors",children:[e.jsxDEV("div",{"data-loc":"client/src/components/ActivityFeed.tsx:249",className:"flex-shrink-0",children:e.jsxDEV("div",{"data-loc":"client/src/components/ActivityFeed.tsx:250",className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:t.user_profiles?.profile_photo?e.jsxDEV("img",{"data-loc":"client/src/components/ActivityFeed.tsx:252",src:t.user_profiles.profile_photo,alt:t.user_profiles.display_name||t.user_profiles.username,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:252,columnNumber:17},this):e.jsxDEV("span",{"data-loc":"client/src/components/ActivityFeed.tsx:258",className:"text-sm font-semibold text-gray-600",children:(t.user_profiles?.display_name||t.user_profiles?.username||"U")[0].toUpperCase()},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:258,columnNumber:17},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:250,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:249,columnNumber:11},this),e.jsxDEV("div",{"data-loc":"client/src/components/ActivityFeed.tsx:266",className:"flex-1 min-w-0",children:e.jsxDEV("div",{"data-loc":"client/src/components/ActivityFeed.tsx:267",className:"flex items-start gap-2",children:[y(t.type),e.jsxDEV("div",{"data-loc":"client/src/components/ActivityFeed.tsx:269",className:"flex-1",children:[e.jsxDEV("p",{"data-loc":"client/src/components/ActivityFeed.tsx:270",className:"text-sm text-gray-900",children:A(t)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:270,columnNumber:17},this),e.jsxDEV("p",{"data-loc":"client/src/components/ActivityFeed.tsx:273",className:"text-xs text-gray-500 mt-1",children:j(t.created_at)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:273,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:269,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:267,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:266,columnNumber:11},this)]},t.id,!0,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:244,columnNumber:9},this))},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/components/ActivityFeed.tsx",lineNumber:242,columnNumber:5},this)}function $(){const[c,o]=l.useState(null),[,a]=g(),[n,r]=l.useState("all");return l.useEffect(()=>{async function d(){const{data:{session:u}}=await m.auth.getSession();if(!u?.user){a("/account");return}o(u.user)}d()},[a]),c?e.jsxDEV("div",{"data-loc":"client/src/pages/Feed.tsx:40",className:"min-h-screen bg-white",children:[e.jsxDEV(f,{"data-loc":"client/src/pages/Feed.tsx:41"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:41,columnNumber:7},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Feed.tsx:43",className:"max-w-4xl mx-auto px-6 py-12",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/Feed.tsx:45",className:"mb-8",children:[e.jsxDEV("h1",{"data-loc":"client/src/pages/Feed.tsx:46",className:"text-4xl font-bold mb-2",children:"Activity Feed"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:46,columnNumber:11},this),e.jsxDEV("p",{"data-loc":"client/src/pages/Feed.tsx:47",className:"text-gray-600",children:"See what's happening in the travel community"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:47,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:45,columnNumber:9},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Feed.tsx:53",className:"flex gap-2 mb-8 border-b border-gray-200",children:[e.jsxDEV("button",{"data-loc":"client/src/pages/Feed.tsx:54",onClick:()=>r("all"),className:`px-6 py-3 text-sm font-medium transition-colors relative ${n==="all"?"text-black":"text-gray-500 hover:text-gray-700"}`,children:["All Activity",n==="all"&&e.jsxDEV("div",{"data-loc":"client/src/pages/Feed.tsx:64",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-black"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:64,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:54,columnNumber:11},this),e.jsxDEV("button",{"data-loc":"client/src/pages/Feed.tsx:67",onClick:()=>r("following"),className:`px-6 py-3 text-sm font-medium transition-colors relative ${n==="following"?"text-black":"text-gray-500 hover:text-gray-700"}`,children:["Following",n==="following"&&e.jsxDEV("div",{"data-loc":"client/src/pages/Feed.tsx:77",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-black"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:77,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:67,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:53,columnNumber:9},this),e.jsxDEV(S,{"data-loc":"client/src/pages/Feed.tsx:83",followingOnly:n==="following",limit:50},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:83,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:43,columnNumber:7},this),e.jsxDEV(p,{"data-loc":"client/src/pages/Feed.tsx:89"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:89,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:40,columnNumber:5},this):e.jsxDEV("div",{"data-loc":"client/src/pages/Feed.tsx:27",className:"min-h-screen bg-white",children:[e.jsxDEV(f,{"data-loc":"client/src/pages/Feed.tsx:28"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:28,columnNumber:9},this),e.jsxDEV("div",{"data-loc":"client/src/pages/Feed.tsx:29",className:"flex items-center justify-center h-[calc(100vh-200px)]",children:e.jsxDEV("div",{"data-loc":"client/src/pages/Feed.tsx:30",className:"text-center",children:e.jsxDEV("div",{"data-loc":"client/src/pages/Feed.tsx:31",className:"animate-pulse text-gray-400",children:"Loading..."},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:31,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:30,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:29,columnNumber:9},this),e.jsxDEV(p,{"data-loc":"client/src/pages/Feed.tsx:34"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:34,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/Feed.tsx",lineNumber:27,columnNumber:7},this)}export{$ as default};
