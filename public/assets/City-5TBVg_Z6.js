import{a as j,W as V,r as i,j as e,H as S,D as w,Y as _,s as o}from"./index-DMrgTe9s.js";function R(m){return m.split("-").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" ")}function T(){const[,m]=j(),[,l]=V("/city/:city"),c=l?.city||"",[n,g]=i.useState([]),[x,N]=i.useState(!0),[h,b]=i.useState(null),[p,d]=i.useState(!1),[f,y]=i.useState([]),[v,C]=i.useState([]),[k,D]=i.useState(null);i.useEffect(()=>{async function s(){const{data:{session:a}}=await o.auth.getSession();if(D(a?.user||null),a?.user){const{data:r}=await o.from("saved_places").select("destination_slug").eq("user_id",a.user.id);r&&y(r.map(t=>t.destination_slug));const{data:u}=await o.from("visited_places").select("destination_slug").eq("user_id",a.user.id);u&&C(u.map(t=>t.destination_slug))}}s()},[]),i.useEffect(()=>{async function s(){const{data:a,error:r}=await o.from("destinations").select("*").eq("city",c).order("name");if(!r&&a){const u=a.map(t=>({name:t.name,slug:t.slug,city:t.city,category:t.category,content:t.content||t.description||"",mainImage:t.image||"",michelinStars:t.michelin_stars||0,crown:t.crown||!1,brand:"",cardTags:"",lat:0,long:0,myRating:0,reviewed:!1,subline:t.description||""}));g(u)}N(!1)}c&&s()},[c]);const E=s=>{b(s),d(!0)};return x?e.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:106",className:"min-h-screen bg-white flex items-center justify-center",children:e.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:107",className:"text-lg text-gray-400",children:"Loading..."},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:107,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:106,columnNumber:7},this):e.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:113",className:"min-h-screen bg-white dark:bg-gray-950 transition-colors duration-300",children:[e.jsxDEV(S,{"data-loc":"client/src/pages/City.tsx:114"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:114,columnNumber:7},this),e.jsxDEV("main",{"data-loc":"client/src/pages/City.tsx:117",className:"px-6 md:px-10 py-12",children:e.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:118",className:"max-w-[1920px] mx-auto",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:120",className:"mb-6",children:e.jsxDEV("button",{"data-loc":"client/src/pages/City.tsx:121",onClick:()=>m("/cities"),className:"text-xs text-gray-500 hover:text-black",children:"← Back to Cities"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:121,columnNumber:13},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:120,columnNumber:11},this),e.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:127",className:"mb-12",children:[e.jsxDEV("h1",{"data-loc":"client/src/pages/City.tsx:128",className:"text-4xl md:text-5xl font-bold uppercase mb-4",children:R(c)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:128,columnNumber:13},this),e.jsxDEV("p",{"data-loc":"client/src/pages/City.tsx:131",className:"text-sm text-gray-600",children:[n.length," ",n.length===1?"destination":"destinations"]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:131,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:127,columnNumber:11},this),n.length===0?e.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:138",className:"text-center py-20",children:e.jsxDEV("p",{"data-loc":"client/src/pages/City.tsx:139",className:"text-xl text-gray-400",children:"No destinations found in this city."},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:139,columnNumber:15},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:138,columnNumber:13},this):e.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:142",className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:n.map(s=>e.jsxDEV(w,{"data-loc":"client/src/pages/City.tsx:144",destination:s,onClick:()=>E(s),isSaved:f.includes(s.slug),isVisited:v.includes(s.slug)},s.slug,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:144,columnNumber:17},this))},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:142,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:118,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:117,columnNumber:7},this),e.jsxDEV("footer",{"data-loc":"client/src/pages/City.tsx:158",className:"border-t border-gray-200 py-8 mt-20",children:e.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:159",className:"max-w-[1920px] mx-auto px-6 md:px-10",children:e.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:160",className:"flex items-center justify-between",children:[e.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:161",className:"flex items-center gap-6 text-xs",children:[e.jsxDEV("a",{"data-loc":"client/src/pages/City.tsx:162",href:"#",className:"hover:underline",children:"INSTAGRAM"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:162,columnNumber:15},this),e.jsxDEV("a",{"data-loc":"client/src/pages/City.tsx:163",href:"#",className:"hover:underline",children:"TWITTER"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:163,columnNumber:15},this),e.jsxDEV("a",{"data-loc":"client/src/pages/City.tsx:164",href:"#",className:"hover:underline",children:"SAVEE"},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:164,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:161,columnNumber:13},this),e.jsxDEV("div",{"data-loc":"client/src/pages/City.tsx:166",className:"text-xs text-gray-500",children:["© ",new Date().getFullYear()," ALL RIGHTS RESERVED"]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:166,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:160,columnNumber:11},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:159,columnNumber:9},this)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:158,columnNumber:7},this),e.jsxDEV(_,{"data-loc":"client/src/pages/City.tsx:174",destination:h,isOpen:p,onClose:()=>d(!1)},void 0,!1,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:174,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ubuntu/travel-guide/client/src/pages/City.tsx",lineNumber:113,columnNumber:5},this)}export{T as default};
